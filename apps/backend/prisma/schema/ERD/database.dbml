// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs

Project Carmen_Inventory {
  database_type: 'PostgreSQL'
  Note: 'Carmen Inventory Project 2024'
}

TABLE CARMEN_SYSTEM.user_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  username varchar(30) [unique, not null]
  email varchar(255) [not null]
  
  consent timestamp [null]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    username [name: "user_username_idx"]
    email [name: "user_email_idx"]
  }
}

TABLE CARMEN_SYSTEM.password_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  userId uuid [not null, ref: > CARMEN_SYSTEM.user_table.id]
  hash text [not null]

  isActive bool [default: false]

  //expiredOn date [not null, default: `now() + '1 day'::interval`]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]

  indexes {
    userId [name: 'password_userid_idx']
  }
}

TABLE CARMEN_SYSTEM.user_profile_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  userId uuid [ref: - CARMEN_SYSTEM.user_table.id]
  firstname varchar(100)
  middlename varchar(100)
  lastname varchar(100)

  bio json

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    userId [name: "userprofile_userid_idx"]
   (firstname, lastname) [name: "userprofile_firstname_lastname_idx"]
  }
}


TABLE CARMEN_SYSTEM.module_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name        varchar   [not null, unique]
  description text

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    name [name: "module_name_idx"]
  }
}

TABLE CARMEN_SYSTEM.business_unit_module_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  businessUnitId uuid [not null, ref: > CARMEN_SYSTEM.business_unit_table.id]
  moduleId uuid [not null, ref: > CARMEN_SYSTEM.module_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    (businessUnitId, moduleId) [name: "businessunitmodule_businessunitid_moduleid_u"]
  }
}

Enum CARMEN_SYSTEM.enum_subscription_status {
  Active
  Inactive
  expired
}

TABLE CARMEN_SYSTEM.subscription_table {
   id uuid [not null, pk, default: `gen_random_uuid()`]
   clusterId uuid [not null, ref: > CARMEN_SYSTEM.cluster_table.id]

   startDate date [not null]
   endDate date [not null]

   status CARMEN_SYSTEM.enum_subscription_status [not null]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {

  }
}

TABLE CARMEN_SYSTEM.subscription_detail_table {
   id uuid [not null, pk, default: `gen_random_uuid()`]

    subscriptionId uuid [not null, ref: > CARMEN_SYSTEM.subscription_table.id]
    bussinessUnitId uuid [not null, ref: > CARMEN_SYSTEM.business_unit_table.id]
    moduleId uuid [not null, ref: > CARMEN_SYSTEM.module_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    (subscriptionId, bussinessUnitId, moduleId) [unique, name: "subscriptiondetail_subscriptionid_businessunitid_moduleid_u"]
  }
}

TABLE CARMEN_SYSTEM.cluster_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  code varchar(30) [not null, unique]
  name text [not null, unique]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    code [unique, name: "cluster_code_u"]
    name [unique, name: "cluster_name_u"]
  }
}

TABLE CARMEN_SYSTEM.business_unit_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  clusterId uuid [not null, ref: > CARMEN_SYSTEM.cluster_table.id]
  code varchar(30) [not null]
  name text [not null]

  isHq bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    clusterId [name: "tenant_clusertid_idx"]
    code [name: "businessunit_code_idx"]
    (clusterId, code) [unique, name: "businessunit_clusertid_code_u"]
  }
}

TABLE CARMEN_SYSTEM.user_business_unit_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  userId uuid [ref: > CARMEN_SYSTEM.user_table.id]
  businessunitId uuid [ref: > CARMEN_SYSTEM.business_unit_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    (userId, businessunitId) [unique, name: "usertenant_userid_bussinessunitid_u"]
  }
}

TABLE CARMEN_SYSTEM.notification_preference_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  userId uuid [not null, unique, ref: > CARMEN_SYSTEM.user_table.id]

  isEmail bool [not null, default: false]
  isSMS bool [default: false]
  isInApp bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    userId [name: "notificationpreference_userid_u"]
  }
}

TABLE CARMEN_SYSTEM.notification_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  userId uuid [not null, ref: > CARMEN_SYSTEM.user_table.id]
  message text
  isRead bool [default: false]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
  }
}

TABLE CARMEN_SYSTEM.role_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  bussinessUnitId uuid [not null, ref: > CARMEN_SYSTEM.business_unit_table.id]
  name        varchar   [not null, unique]
  description text

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    name [name: "role_name_idx"]
    (bussinessUnitId, name) [unique, name: "role_bussinessunitid_name_u"]
  }
}

TABLE CARMEN_SYSTEM.permission_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name        varchar   [unique, not null]
  description text

  canGet bool [not null, default: true]
  canCreate bool [not null, default: true]
  canUpdate bool [not null, default: true]
  canDelete bool [not null, default: true]
  canPrint bool [not null, default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  indexes {
    name [name: "permission_name_u"]
  }
}

TABLE CARMEN_SYSTEM.user_role_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  userId   uuid [not null, ref: > CARMEN_SYSTEM.user_table.id]
  roleId   uuid [not null, ref: > CARMEN_SYSTEM.role_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  Indexes {
    (userId, roleId) [unique, name: "userrole_userid_roleid_u"]
  }
}

TABLE CARMEN_SYSTEM.role_permission_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  roleId       uuid [not null, ref: > CARMEN_SYSTEM.role_table.id]
  permissionId uuid [not null, ref: > CARMEN_SYSTEM.permission_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid [ref: > CARMEN_SYSTEM.user_table.id]

  Indexes {
    (roleId, permissionId) [unique, name: "rolepermission_roleid_permissionid_u"]
  }
}

enum TENANT_DUMMY.enum_activity_action {
  read
  create
  update
  delete
  login
  other
}

TABLE TENANT_DUMMY.global_activity_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  action TENANT_DUMMY.enum_activity_action
  entityType varchar(100)
  entityId uuid
  actorId uuid
  metadata Json [null]
  oldData JSON [null]
  newData json [null]
  ipAddress text [null]
  userAgent text [null]
  description text

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid

  indexes {
    (entityType, entityId) [name: 'global_activity_entitytype_entityid_idx']
    actorId
    action
    createdAt
  }

  // id          Int       @id @default(autoincrement())
  // action      String    // create, update, delete, login, etc.
  // entityType  String    // user, post, comment, etc.
  // entityId    String    // ID of the affected record
  // actorId     String?   // ID of user who performed the action
  // metadata    Json?     // Store additional details as JSON
  // oldData     Json?     // Previous state (for updates)
  // newData     Json?     // New state (for creates/updates)
  // ipAddress   String?   // IP address of the request
  // userAgent   String?   // Browser/client information
  // createdAt   DateTime  @default(now())

  // // Relations (optional)
  // actor       User?     @relation(fields: [actorId], references: [id])
  
  // // Indexes for better query performance
  // @@index([entityType, entityId])
  // @@index([actorId])
  // @@index([action])
  // @@index([createdAt])

}

TABLE TENANT_DUMMY.menu_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar(5) [unique, not null]
  description text
  isActive bool [default: true]
  isVisible bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "menu_name_u"]
  }
}

TABLE TENANT_DUMMY.currency_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  code varchar(3) [unique, not null]
  name varchar(100) [not null]
  symbol varchar(5)
  description text [default: ""]
  isActive bool [default: true]
  rate float [default: 1]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    code [name: "currency_code_u"]
  }
}

TABLE TENANT_DUMMY.exchange_rate_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]

  dateAt timestamp [default: `now()`]
  currencyId uuid [ref: > TENANT_DUMMY.currency_table.id]
  rate float [default: 1]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    (dateAt, currencyId) [unique, name: "exchangerate_dateat_currencyid_u"]
  }
}

enum TENANT_DUMMY.enum_location_type {
  Inventory
  Direct
  Consignment
}

TABLE TENANT_DUMMY.location_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]

  locationType TENANT_DUMMY.enum_location_type [not null]

  description text
  isActive bool [default: true]

  deliveryPointId uuid [ref: > TENANT_DUMMY.delivery_point_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "location_name_u"]
  }
}

TABLE TENANT_DUMMY.delivery_point_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "deliverypoint_name_u"]
  }
}

TABLE TENANT_DUMMY.unit_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "unit_name_u"]
  }
}

Enum TENANT_DUMMY.enum_unit_type {
  OrderUnit
  InventoryUnit
  RecipeUnit
}

TABLE TENANT_DUMMY.unit_conversion_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  productId uuid [ref: > TENANT_DUMMY.product_table.id]
  unitType TENANT_DUMMY.enum_unit_type [not null]
  fromUnitId uuid [ref: > TENANT_DUMMY.unit_table.id]
  toUnitId uuid [ref: > TENANT_DUMMY.unit_table.id]
  rate float [default: 1]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    (productId, unitType) [name: "unitconversion_productid_unittype_u"]
  }
}

TABLE TENANT_DUMMY.department_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "department_name_u"]
  }
}

TABLE TENANT_DUMMY.product_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  code varchar [unique, not null]
  name varchar [unique, not null]
  description text

  primaryUnit uuid [not null, ref: > TENANT_DUMMY.unit_table.id]

  isActive bool [default: true]
  
  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    code [name: "product_code_u"]
    name [name: "product_name_u"]
  }
}

TABLE TENANT_DUMMY.product_info_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  productId uuid [unique, not null, ref: - TENANT_DUMMY.product_table.id]
  price Float

  info json

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    productId [name: "productinfo_productid_u"]
  }
}

TABLE TENANT_DUMMY.product_category_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "productcategory_name_u"]
  }
}

TABLE TENANT_DUMMY.product_sub_category_table {
 
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]
  productCategoryId uuid [ref: > TENANT_DUMMY.product_category_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "productsubcategory_name_u"]
  }
}

TABLE TENANT_DUMMY.product_item_group_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]
  productSubCategoryId uuid [ref: > TENANT_DUMMY.product_sub_category_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "productitemgroup_name_u"]
  }
}

TABLE TENANT_DUMMY.purchase_request_type_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "PRtype_name_u"]
  }
}

TABLE TENANT_DUMMY.purchase_request_0_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  refName varchar [unique, not null]
  prDate date
  prTypeId uuid [ref: > TENANT_DUMMY.purchase_request_type_table.id]

  requestorId uuid
  departmentId uuid

  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    refName [name: "PR0_refname_u"]
  }
}

TABLE TENANT_DUMMY.purchase_request_1_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  
  PR0Id uuid [ref: > TENANT_DUMMY.purchase_request_0_table.id]
  
  locationId uuid
  productId uuid
  unitId uuid

  description text

  requestQty float
  approveQty float

  currencyId uuid
  currencyRate float

  price numeric(15,5)
  totalPrice numeric(15,5)

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

   indexes {
  }
}

TABLE TENANT_DUMMY.purchase_request_1_workflow_table {

   id uuid [not null, pk, default: `gen_random_uuid()`]
  PR1Id uuid [ref: > TENANT_DUMMY.purchase_request_1_table.id]



  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 
  
}

TABLE TENANT_DUMMY.purchase_order_0_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid
  
  indexes {
    name [name: "PO_name_u"]
  }
}

TABLE TENANT_DUMMY.purchase_order_1_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique]
  description text
  isActive bool [default: true]

  PO0Id uuid [ref: > TENANT_DUMMY.purchase_order_0_table.id]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "PO1_name_u"]
  }
}


TABLE TENANT_DUMMY.vendor_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "vendor_name_u"]
  }
}


TABLE TENANT_DUMMY.contact_type_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name uuid [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "contacttype_name_u"]
  }
}

TABLE TENANT_DUMMY.vendor_contact_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  vendorId uuid [ref: > TENANT_DUMMY.vendor_table.id]
  contactTypeId uuid [not null, ref: > TENANT_DUMMY.contact_type_table.id]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    (vendorId, contactTypeId) [unique, name: "vendorcontact_vendorid_contacttypeid_u"]
  }
}


TABLE TENANT_DUMMY.address_type_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  name uuid [unique, not null]
  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    name [name: "addresstype_name_u"]
  }
}

TABLE TENANT_DUMMY.vendor_address_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]
  vendorId uuid [ref: > TENANT_DUMMY.vendor_table.id]
  addressTypeId uuid [not null, ref: > TENANT_DUMMY.address_type_table.id]
  address json
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    (vendorId, addressTypeId) [unique, name: "vendorcontact_vendorid_addresstypeid_u"]
  }
}

TABLE TENANT_DUMMY.product_vendor_table {
  id uuid [not null, pk, default: `gen_random_uuid()`]

  vendorId uuid [ref: > TENANT_DUMMY.vendor_table.id]
  productId uuid [ref: > TENANT_DUMMY.product_table.id]

  description text
  isActive bool [default: true]

  createdAt timestamp [default: `CURRENT_TIMESTAMP` ]
  createById uuid 

  updateAt timestamp [null, default: `CURRENT_TIMESTAMP`]
  updateById uuid

  indexes {
    (vendorId, productId) [unique, name: "productvendor_vendorid_productid_u"]
  }
}

enum TENANT_DUMMY.enum_purchase_request_doc_status {
  Draft
  WIP
  Complete
}

enum TENANT_DUMMY.enum_purchase_request_workflow_status {
  Draft
  Pending
  Review
  Accept
}

enum TENANT_DUMMY.enum_purchase_order_status {
  Open 
  Voided 
  Closed 
  Draft 
  Sent
  Partial
  FullyReceived 
  Cancelled 
  Deleted 
}

enum TENANT_DUMMY.enum_inventory_doc_type {
  GRN
  CN
  SR
  ISSUE
  ADJ
  SI
  SO
}

TABLE TENANT_DUMMY.inventory_transaction_0_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  name varchar [unique, not null]
  invDocType TENANT_DUMMY.enum_inventory_doc_type
}

TABLE TENANT_DUMMY.inventory_transaction_1_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  inv0Id uuid [not null, ref: > TENANT_DUMMY.inventory_transaction_0_table.id]

  fromLot uuid
  currentLotName varchar

  qty decimal
  cost numeric(15,5)

}

TABLE TENANT_DUMMY.inventory_transaction_2_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  inv1Id uuid [ not null, ref: > TENANT_DUMMY.inventory_transaction_1_table.id]
  
  lotName varchar
  lotIndex integer [not null, default: 1]

  qty decimal
  cost numeric(15,5)

  indexes {
    (lotName, lotIndex) [unique, name: "inv2_lotname_lotindex_u"]
  }
}

TABLE TENANT_DUMMY.good_receive_note_0_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  inv0Id uuid [not null, ref: - TENANT_DUMMY.inventory_transaction_0_table.id]
  
  name varchar

}

TABLE TENANT_DUMMY.good_receive_note_1_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  GRN0Id uuid [not null, ref: > TENANT_DUMMY.good_receive_note_0_table.id]
  
  name varchar

}

TABLE TENANT_DUMMY.store_requisition_0_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  inv0Id uuid [not null, ref: - TENANT_DUMMY.inventory_transaction_0_table.id]
  
  name varchar

}

TABLE TENANT_DUMMY.store_requisition_1_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  SR0Id uuid [not null, ref: > TENANT_DUMMY.store_requisition_0_table.id]
  
  name varchar

}


TABLE TENANT_DUMMY.stock_in_0_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  inv0Id uuid [not null, ref: - TENANT_DUMMY.inventory_transaction_0_table.id]
  
  name varchar

}

TABLE TENANT_DUMMY.stock_in_1_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  SI0Id uuid [not null, ref: > TENANT_DUMMY.stock_in_0_table.id]
  
  name varchar

}


TABLE TENANT_DUMMY.stock_out_0_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  inv0Id uuid [not null, ref: - TENANT_DUMMY.inventory_transaction_0_table.id]
  
  name varchar

}

TABLE TENANT_DUMMY.stock_out_1_table {

  id uuid [not null, pk, default: `gen_random_uuid()`]
  SO0Id uuid [not null, ref: > TENANT_DUMMY.stock_out_0_table.id]
  
  name varchar

}
